<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanctuary OS | The Liana Trust</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://kit.fontawesome.com/e0c6d65845.js" crossorigin="anonymous"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'radium': '#FF6B35',
                        'laboratory': '#2A5F41',
                        'uranium': '#8B9A46',
                        'polonium': '#D4A574',
                        'beige-warm': '#F5F0E8',
                        'beige-cool': '#E8E2D4',
                        'text-dark': '#2D2D2D',
                        'text-mid': '#6B6B6B',
                        'text-light': '#9B9B9B'
                    },
                    fontFamily: {
                        'rubik': ['Rubik', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Rubik', system-ui, sans-serif;
        }
        
        .glass-overlay {
            backdrop-filter: blur(12px);
            background: rgba(45, 45, 45, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .camera-feed {
            background: linear-gradient(45deg, #E8E2D4 25%, transparent 25%),
                        linear-gradient(-45deg, #E8E2D4 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #E8E2D4 75%),
                        linear-gradient(-45deg, transparent 75%, #E8E2D4 75%);
            background-size: 12px 12px;
            background-position: 0 0, 0 6px, 6px -6px, -6px 0px;
        }
        
        .live-pulse {
            animation: pulse 2s infinite;
        }
        
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .subtle-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .sensor-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            position: absolute;
            animation: sensorPulse 3s infinite;
        }
        
        @keyframes sensorPulse {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .lighting-cycle {
            background: linear-gradient(90deg, #1a1a2e 0%, #16213e 25%, #eee2dc 50%, #e85a4f 75%, #1a1a2e 100%);
            animation: lightCycle 10s infinite linear;
        }
        
        @keyframes lightCycle {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
    </style>
</head>

<body class="bg-beige-cool font-rubik text-text-dark min-h-screen">
    <div id="app">
        <!-- OS Header -->
        <header class="bg-beige-warm border-b-2 border-polonium p-4 sticky top-0 z-40">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="w-8 h-8 bg-laboratory rounded-lg flex items-center justify-center">
                        <i class="fas fa-leaf text-beige-warm text-sm"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-text-dark uppercase tracking-wide">SANCTUARY OS</h1>
                        <p class="text-xs text-text-mid uppercase tracking-wider">The Liana Trust Research Station</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="hidden sm:flex items-center space-x-3 text-xs">
                        <div class="flex items-center space-x-1">
                            <div class="w-2 h-2 bg-polonium rounded-full live-pulse"></div>
                            <span class="text-text-mid">{{ totalSnakes }} RESIDENTS</span>
                        </div>
                        <span class="text-text-mid">{{ currentTime }}</span>
                    </div>
                    
                    <div class="relative">
                        <button @click="toggleAdminDropdown" 
                                :class="['p-2 rounded-lg transition-colors', adminDropdownOpen ? 'bg-radium text-white' : 'hover:bg-polonium/30 text-text-mid']">
                            <i class="fas fa-cog text-sm"></i>
                        </button>
                        
                        <div v-if="adminDropdownOpen" class="absolute right-0 top-12 bg-white rounded-lg shadow-lg py-2 w-48 z-50 border border-polonium">
                            <button @click="toggleAdminMode" :class="['w-full text-left px-4 py-2 text-sm hover:bg-beige-warm flex items-center', adminMode ? 'text-radium font-medium' : 'text-text-dark']">
                                <i class="fas fa-edit mr-2"></i>
                                {{ adminMode ? 'Exit Admin Mode' : 'Enter Admin Mode' }}
                            </button>
                            <button @click="addNewSnake" class="w-full text-left px-4 py-2 text-sm text-laboratory hover:bg-beige-warm flex items-center">
                                <i class="fas fa-plus mr-2"></i>Add New Resident
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Admin Banner -->
        <div v-if="adminMode" class="px-4 max-w-7xl mx-auto mb-6 pt-4">
            <div class="bg-radium/10 border border-radium/30 rounded-xl p-4 flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-user-shield text-radium"></i>
                    <span class="font-medium text-radium uppercase tracking-wide">Admin Mode Active</span>
                </div>
                <span class="text-xs text-text-mid">Click any resident card to edit details</span>
            </div>
        </div>

        <!-- Snake Grid -->
        <main class="px-4 pb-8 max-w-7xl pt-8 mx-auto">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <div 
                    v-for="snake in snakes" 
                    :key="snake.id"
                    class="aspect-square bg-white rounded-xl overflow-hidden relative group cursor-pointer border border-polonium hover:border-radium/50 transition-all duration-300 subtle-shadow hover:shadow-lg"
                    @click="openSnakeProfile(snake)"
                >
                    <!-- Background Media -->
                    <div class="absolute inset-0">
                        <div v-if="snake.media.videos.length > 0" class="h-full relative">
                            <video 
                                :src="snake.media.videos[0]" 
                                loop 
                                autoplay 
                                playsinline 
                                muted 
                                class="object-cover w-full h-full"
                            ></video>
                            <div class="absolute top-3 right-3 z-20">
                                <div class="w-3 h-3 bg-radium rounded-full live-pulse"></div>
                            </div>
                        </div>
                        <div v-else-if="snake.media.images.length > 0" class="h-full relative">
                            <img :src="snake.media.images[0]" class="object-cover w-full h-full" />
                        </div>
                        <div v-else class="camera-feed h-full flex items-center justify-center">
                            <div class="text-center text-text-light">
                                <i class="fas fa-image text-4xl mb-2 opacity-40"></i>
                                <p class="text-sm opacity-60 font-medium">PHOTO COMING SOON</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Environmental overlay -->
                    <div class="absolute inset-0 bg-gradient-to-t from-text-dark/80 via-transparent to-transparent">
                        <div class="absolute top-3 left-3 glass-overlay rounded-lg px-3 py-1">
                            <div class="flex items-center space-x-2 text-xs text-white">
                                <span class="flex items-center">
                                    <i class="fas fa-thermometer-half mr-1 text-radium"></i>
                                    {{ snake.temperature }}Â°C
                                </span>
                                <span class="flex items-center">
                                    <i class="fas fa-tint mr-1 text-uranium"></i>
                                    {{ snake.humidity }}%
                                </span>
                                <span class="flex items-center">
                                    <i class="fas fa-lightbulb mr-1 text-yellow-400"></i>
                                    {{ snake.lightLevel }}
                                </span>
                            </div>
                        </div>
                        
                        <!-- Snake info -->
                        <div class="absolute bottom-0 left-0 right-0 p-4">
                            <div class="glass-overlay rounded-lg p-3">
                                <h3 class="text-lg font-bold text-white mb-1">{{ snake.name }}</h3>
                                <p class="text-sm text-beige-cool">{{ snake.nickname }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Snake Profile Modal -->
        <div v-if="selectedSnake" class="fixed inset-0 bg-text-dark/80 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4" @click="closeSnakeProfile">
            <div class="bg-beige-warm rounded-t-xl sm:rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto slide-up" @click.stop>
                
                <!-- Media Gallery Header -->
                <div class="relative">
                    <!-- Media Carousel -->
                    <div class="aspect-video relative overflow-hidden sm:rounded-t-xl">
                        <!-- Video/Image Display -->
                        <div v-if="selectedSnake.media.videos.length > 0 && currentMediaType === 'video'" class="h-full">
                            <video 
                                :src="selectedSnake.media.videos[currentMediaIndex]" 
                                loop 
                                autoplay 
                                playsinline 
                                muted 
                                class="object-cover w-full h-full"
                            ></video>
                            <div class="absolute top-4 right-4">
                                <div class="w-3 h-3 bg-radium rounded-full live-pulse"></div>
                            </div>
                        </div>
                        
                        <div v-else-if="selectedSnake.media.images.length > 0 && currentMediaType === 'image'" class="h-full">
                            <img :src="selectedSnake.media.images[currentMediaIndex]" class="object-cover w-full h-full" />
                        </div>
                        
                        <div v-else class="camera-feed h-full flex items-center justify-center">
                            <div class="text-center text-text-mid">
                                <i class="fas fa-image text-4xl mb-2 opacity-30"></i>
                                <p class="text-sm opacity-60">No media available</p>
                            </div>
                        </div>
                        
                        <!-- Media Controls -->
                        <div class="absolute bottom-4 left-4 right-4 flex items-center justify-between">
                            <div class="flex space-x-2">
                                <button v-if="selectedSnake.media.videos.length > 0" 
                                        @click="switchMediaType('video')"
                                        :class="['px-3 py-1 rounded text-xs font-medium transition-colors', currentMediaType === 'video' ? 'bg-radium text-white' : 'bg-white/20 text-white hover:bg-white/30']">
                                    <i class="fas fa-video mr-1"></i>Feed
                                </button>
                                <button v-if="selectedSnake.media.images.length > 0"
                                        @click="switchMediaType('image')"
                                        :class="['px-3 py-1 rounded text-xs font-medium transition-colors', currentMediaType === 'image' ? 'bg-uranium text-white' : 'bg-white/20 text-white hover:bg-white/30']">
                                    <i class="fas fa-camera mr-1"></i>Photos
                                </button>
                            </div>
                            
                            <!-- Navigation -->
                            <div class="flex items-center space-x-2">
                                <button @click="previousMedia" class="bg-white/20 hover:bg-white/30 text-white p-2 rounded">
                                    <i class="fas fa-chevron-left text-xs"></i>
                                </button>
                                <span class="text-white text-xs bg-white/20 px-2 py-1 rounded">
                                    {{ currentMediaIndex + 1 }} / {{ currentMediaArray.length }}
                                </span>
                                <button @click="nextMedia" class="bg-white/20 hover:bg-white/30 text-white p-2 rounded">
                                    <i class="fas fa-chevron-right text-xs"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Snake Title Overlay -->
                        <div class="absolute bottom-16 left-4">
                            <div class="glass-overlay rounded-lg p-4">
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <h2 @click="startEdit('name')" @blur="saveField('name', $event)" @keyup.enter="$event.target.blur()" :contenteditable="adminMode" :class="adminMode ? 'cursor-pointer hover:bg-white/10 rounded' : ''" class="text-xl font-bold text-white outline-none">{{ selectedSnake.name }}</h2>
                                        <p @click="startEdit('nickname')" @blur="saveField('nickname', $event)" @keyup.enter="$event.target.blur()" :contenteditable="adminMode" :class="adminMode ? 'cursor-pointer hover:bg-white/10 rounded' : ''" class="text-beige-cool text-sm outline-none">{{ selectedSnake.nickname }}</p>
                                        <p @click="startEdit('species')" @blur="saveField('species', $event)" @keyup.enter="$event.target.blur()" :contenteditable="adminMode" :class="adminMode ? 'cursor-pointer hover:bg-white/10 rounded' : ''" class="text-white/80 text-xs mt-1 italic outline-none">{{ selectedSnake.species }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Close Button -->
                        <div class="absolute top-4 right-4">
                            <button @click="closeSnakeProfile" class="bg-white/20 hover:bg-white/30 text-white p-2 rounded-lg transition-colors">
                                <i class="fas fa-times text-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Modal Content -->
                <div class="p-6 space-y-6">
                    <!-- Sensor Network Map -->
                    <div class="hidden">
                        <h3 class="text-lg font-bold mb-3 flex items-center text-text-dark uppercase tracking-wide">
                            <i class="fas fa-network-wired mr-2 text-laboratory"></i>
                            Sensor Network ({{ selectedSnake.sensorCount }} Points)
                        </h3>
                        
                        <div class="bg-white rounded-lg border border-polonium p-6 relative overflow-hidden">
                            <!-- Enclosure outline -->
                            <div class="aspect-video border-2 border-text-light/30 rounded-lg relative bg-beige-cool/30">
                                <!-- Sensor dots positioned around enclosure -->
                                <div v-for="(sensor, index) in selectedSnake.sensors" :key="sensor.id" 
                                     class="sensor-dot absolute"
                                     :class="getSensorColor(sensor.type)"
                                     :style="getSensorPosition(index, selectedSnake.sensors.length)"
                                     :title="`${sensor.type}: ${sensor.value}${sensor.unit} at ${sensor.location}`">
                                </div>
                                
                                <!-- Legend -->
                                <div class="absolute bottom-2 left-2 right-2 bg-white/90 rounded p-2">
                                    <div class="grid grid-cols-3 gap-2 text-xs">
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-radium rounded-full"></div>
                                            <span>Temperature</span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-uranium rounded-full"></div>
                                            <span>Humidity</span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                            <span>Light</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Environmental Grid -->
                    <div>
                        <h3 class="text-lg font-bold mb-3 flex items-center text-text-dark uppercase tracking-wide">
                            <i class="fas fa-thermometer-quarter mr-2 text-laboratory"></i>
                            Environmental Parameters
                        </h3>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <!-- Temperature -->
                            <div class="bg-white rounded-lg border border-polonium p-4">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center">
                                        <i class="fas fa-thermometer-half mr-2 text-radium"></i>
                                        <span class="font-bold text-text-dark text-sm">TEMP</span>
                                    </div>
                                    <span class="text-lg font-bold text-radium">{{ selectedSnake.temperature }}Â°C</span>
                                </div>
                                
                                <div class="relative h-2 bg-beige-cool rounded-full overflow-hidden">
                                    <div class="absolute h-full bg-laboratory/30 rounded-full" 
                                         :style="`left: ${((selectedSnake.idealTemp.min + 5)/50)*100}%; width: ${((selectedSnake.idealTemp.max - selectedSnake.idealTemp.min)/50)*100}%`">
                                    </div>
                                    <div class="absolute top-0 h-full w-1 bg-radium rounded-full" 
                                         :style="`left: ${((selectedSnake.temperature + 5)/50)*100}%`">
                                    </div>
                                </div>
                                
                                <div class="text-xs text-text-mid mt-2">
                                    Range: {{ selectedSnake.idealTemp.min }}-{{ selectedSnake.idealTemp.max }}Â°C
                                </div>
                            </div>
                            
                            <!-- Humidity -->
                            <div class="bg-white rounded-lg border border-polonium p-4">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center">
                                        <i class="fas fa-tint mr-2 text-uranium"></i>
                                        <span class="font-bold text-text-dark text-sm">HUMIDITY</span>
                                    </div>
                                    <span class="text-lg font-bold text-uranium">{{ selectedSnake.humidity }}%</span>
                                </div>
                                
                                <div class="relative h-2 bg-beige-cool rounded-full overflow-hidden">
                                    <div class="absolute h-full bg-uranium/30 rounded-full" 
                                         :style="`left: ${selectedSnake.idealHumidity.min}%; width: ${selectedSnake.idealHumidity.max - selectedSnake.idealHumidity.min}%`">
                                    </div>
                                    <div class="absolute top-0 h-full w-1 bg-uranium rounded-full" 
                                         :style="`left: ${selectedSnake.humidity}%`">
                                    </div>
                                </div>
                                
                                <div class="text-xs text-text-mid mt-2">
                                    Range: {{ selectedSnake.idealHumidity.min }}-{{ selectedSnake.idealHumidity.max }}%
                                </div>
                            </div>
                            
                            <!-- Light Level -->
                            <div class="bg-white rounded-lg border border-polonium p-4">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center">
                                        <i class="fas fa-lightbulb mr-2 text-yellow-500"></i>
                                        <span class="font-bold text-text-dark text-sm">LIGHT</span>
                                    </div>
                                    <span class="text-lg font-bold text-yellow-600">{{ selectedSnake.lightLevel }}</span>
                                </div>
                                
                                <div class="relative h-2 bg-beige-cool rounded-full overflow-hidden">
                                    <div class="absolute h-full bg-yellow-400/30 rounded-full" 
                                         :style="`left: ${(selectedSnake.idealLight.min/2000)*100}%; width: ${((selectedSnake.idealLight.max - selectedSnake.idealLight.min)/2000)*100}%`">
                                    </div>
                                    <div class="absolute top-0 h-full w-1 bg-yellow-500 rounded-full" 
                                         :style="`left: ${(selectedSnake.lightLevel/2000)*100}%`">
                                    </div>
                                </div>
                                
                                <div class="text-xs text-text-mid mt-2">
                                    Range: {{ selectedSnake.idealLight.min }}-{{ selectedSnake.idealLight.max }} lux
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Lighting Control System -->
                    <div>
                        <h3 class="text-lg font-bold mb-3 flex items-center text-text-dark uppercase tracking-wide">
                            <i class="fas fa-sun mr-2 text-laboratory"></i>
                            Automated Lighting Cycle
                        </h3>
                        
                        <div class="bg-white rounded-lg border border-polonium p-4">
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-sm font-medium text-text-dark">{{ selectedSnake.species.split('(')[0].trim() }} Cycle</span>
                                <div class="flex items-center space-x-2">
                                    <div :class="['w-3 h-3 rounded-full', selectedSnake.lightingCycle.active ? 'bg-laboratory animate-pulse' : 'bg-text-light']"></div>
                                    <span class="text-xs text-text-mid">{{ selectedSnake.lightingCycle.active ? 'ACTIVE' : 'MANUAL' }}</span>
                                </div>
                            </div>
                            
                            <!-- Light sources -->
                            <div class="space-y-3">
                                <div v-for="light in selectedSnake.lightingCycle.lights" :key="light.id" 
                                     class="flex items-center justify-between p-3 bg-beige-cool/50 rounded-lg">
                                    <div class="flex items-center space-x-3">
                                        <i :class="light.icon" :class="light.active ? 'text-yellow-500' : 'text-text-light'"></i>
                                        <div>
                                            <div class="text-sm font-medium text-text-dark">{{ light.name }}</div>
                                            <div class="text-xs text-text-mid">{{ light.schedule }}</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div :class="['w-8 h-4 rounded-full border border-text-light', light.active ? 'bg-laboratory' : 'bg-text-light']">
                                            <div :class="['w-3 h-3 bg-white rounded-full transition-transform', light.active ? 'translate-x-4' : 'translate-x-0']"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Research Notes -->
                    <div>
                        <h3 class="text-lg font-bold mb-3 flex items-center text-text-dark uppercase tracking-wide">
                            <i class="fas fa-book-open mr-2 text-laboratory"></i>
                            Research Documentation
                        </h3>
                        <div class="bg-white rounded-lg border border-polonium p-4">
                            <p @click="startEdit('story')" @blur="saveField('story', $event)" @keyup.enter="$event.target.blur()" :contenteditable="adminMode" :class="adminMode ? 'cursor-pointer hover:bg-beige-warm/50 rounded' : ''" class="text-sm text-text-dark leading-relaxed outline-none min-h-[4rem]">{{ selectedSnake.story }}</p>
                        </div>
                    </div>
                    
                    <!-- Care Protocol -->
                    <div>
                        <h3 class="text-lg font-bold mb-3 flex items-center text-text-dark uppercase tracking-wide">
                            <i class="fas fa-calendar-alt mr-2 text-laboratory"></i>
                            Care Protocol
                        </h3>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                            <div class="bg-white rounded-lg border border-polonium p-4 text-center">
                                <i class="fas fa-utensils text-radium text-lg mb-2"></i>
                                <div class="text-xs text-text-mid uppercase tracking-wide mb-1">Last Meal</div>
                                <div @click="startEdit('lastMeal')" @blur="saveField('lastMeal', $event)" @keyup.enter="$event.target.blur()" :contenteditable="adminMode" :class="adminMode ? 'cursor-pointer hover:bg-beige-warm/50 rounded' : ''" class="text-sm font-bold text-text-dark outline-none">{{ selectedSnake.lastMeal }}</div>
                            </div>
                            
                            <div class="bg-white rounded-lg border border-polonium p-4 text-center">
                                <i class="fas fa-broom text-uranium text-lg mb-2"></i>
                                <div class="text-xs text-text-mid uppercase tracking-wide mb-1">Cleaned</div>
                                <div @click="startEdit('lastCleaning')" @blur="saveField('lastCleaning', $event)" @keyup.enter="$event.target.blur()" :contenteditable="adminMode" :class="adminMode ? 'cursor-pointer hover:bg-beige-warm/50 rounded' : ''" class="text-sm font-bold text-text-dark outline-none">{{ selectedSnake.lastCleaning }}</div>
                            </div>
                            
                            <div class="bg-white rounded-lg border border-polonium p-4 text-center">
                                <i class="fas fa-stethoscope text-laboratory text-lg mb-2"></i>
                                <div class="text-xs text-text-mid uppercase tracking-wide mb-1">Check-up</div>
                                <div @click="startEdit('nextCheckup')" @blur="saveField('nextCheckup', $event)" @keyup.enter="$event.target.blur()" :contenteditable="adminMode" :class="adminMode ? 'cursor-pointer hover:bg-beige-warm/50 rounded' : ''" class="text-sm font-bold text-text-dark outline-none">{{ selectedSnake.nextCheckup }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    currentTime: '',
                    selectedSnake: null,
                    adminMode: false,
                    adminDropdownOpen: false,
                    currentMediaType: 'video',
                    currentMediaIndex: 0,
                    snakes: [
                        {
                            id: 'aragon',
                            name: 'Aragon',
                            nickname: 'The Gentle Giant',
                            species: 'Ophiophagus hannah (King Cobra)',
                            temperature: 28.5,
                            humidity: 75,
                            lightLevel: 450,
                            sensorCount: 10,
                            age: '3-4 years',
                            lastMeal: '3 days ago',
                            lastCleaning: '2 days ago',
                            nextCheckup: 'Next week',
                            story: 'Aragon came to us as part of our venom research program with IISc. Despite being one of the world\'s most venomous snakes, he has adapted well to his environment and plays a crucial role in developing life-saving antivenom.',
                            idealTemp: { min: 15, max: 35 },
                            idealHumidity: { min: 30, max: 100 },
                            idealLight: { min: 200, max: 800 },
                            media: {
                                videos: ['videos/OpKaKa.mp4'],
                                images: ['images/OpKaKa01.jpg', 'images/OpKaKa02.jpg']
                            },
                            lightingCycle: {
                                active: true,
                                lights: [
                                    { id: 'heat1', name: 'Basking Heat Lamp', schedule: '6:00 AM - 6:00 PM', intensity: 75, active: true, icon: 'fas fa-sun' },
                                    { id: 'uv1', name: 'UV-B Lamp', schedule: '7:00 AM - 5:00 PM', intensity: 60, active: true, icon: 'fas fa-radiation' },
                                    { id: 'ambient1', name: 'Ambient LED', schedule: '24/7', intensity: 30, active: true, icon: 'fas fa-lightbulb' },
                                    { id: 'night1', name: 'Night Vision', schedule: '6:00 PM - 6:00 AM', intensity: 10, active: false, icon: 'fas fa-moon' }
                                ]
                            },
                            sensors: [
                                { id: 'T001', type: 'temperature', value: 29.2, unit: 'Â°C', location: 'Basking Area' },
                                { id: 'T002', type: 'temperature', value: 26.8, unit: 'Â°C', location: 'Cool Side' },
                                { id: 'T003', type: 'temperature', value: 25.1, unit: 'Â°C', location: 'Hide Box' },
                                { id: 'H001', type: 'humidity', value: 78, unit: '%', location: 'Basking Area' },
                                { id: 'H002', type: 'humidity', value: 82, unit: '%', location: 'Water Bowl' },
                                { id: 'H003', type: 'humidity', value: 75, unit: '%', location: 'Hide Box' },
                                { id: 'L001', type: 'light', value: 520, unit: 'lux', location: 'Basking Spot' },
                                { id: 'L002', type: 'light', value: 180, unit: 'lux', location: 'Shaded Area' },
                                { id: 'L003', type: 'light', value: 45, unit: 'lux', location: 'Hide Box' },
                                { id: 'M001', type: 'motion', value: 'Active', unit: '', location: 'General' }
                            ]
                        },
                        {
                            id: 'priya',
                            name: 'Priya',
                            nickname: 'The Survivor',
                            species: 'Naja naja (Spectacled Cobra)',
                            temperature: 24.2,
                            humidity: 82,
                            lightLevel: 320,
                            sensorCount: 6,
                            age: '2-3 years',
                            lastMeal: '5 days ago',
                            lastCleaning: 'Yesterday',
                            nextCheckup: 'This weekend',
                            story: 'Priya was rescued from a human-snake conflict situation. She has shown remarkable resilience and her case study helps us develop better conflict resolution protocols.',
                            idealTemp: { min: 20, max: 35 },
                            idealHumidity: { min: 20, max: 80 },
                            idealLight: { min: 150, max: 600 },
                            media: {
                                videos: ['videos/EcCaKa.mp4'],
                                images: ['images/EcCaKa01.jpg', 'images/EcCaKa02.jpg', 'images/EcCaKa03.jpg', 'images/EcCaKa04.jpg']
                            },
                            lightingCycle: {
                                active: true,
                                lights: [
                                    { id: 'heat2', name: 'Ceramic Heat Emitter', schedule: '24/7', intensity: 40, active: true, icon: 'fas fa-fire' },
                                    { id: 'day2', name: 'Daylight LED', schedule: '6:00 AM - 6:00 PM', intensity: 50, active: true, icon: 'fas fa-sun' },
                                    { id: 'night2', name: 'Red Night Light', schedule: '6:00 PM - 6:00 AM', intensity: 15, active: false, icon: 'fas fa-moon' }
                                ]
                            },
                            sensors: [
                                { id: 'T004', type: 'temperature', value: 25.1, unit: 'Â°C', location: 'Warm Side' },
                                { id: 'T005', type: 'temperature', value: 22.8, unit: 'Â°C', location: 'Cool Side' },
                                { id: 'H004', type: 'humidity', value: 85, unit: '%', location: 'Water Area' },
                                { id: 'H005', type: 'humidity', value: 78, unit: '%', location: 'Hide Box' },
                                { id: 'L004', type: 'light', value: 340, unit: 'lux', location: 'Basking' },
                                { id: 'L005', type: 'light', value: 120, unit: 'lux', location: 'Retreat' }
                            ]
                        },
                        {
                            id: 'ravi',
                            name: 'Ravi',
                            nickname: 'The Ambassador',
                            species: 'Ptyas mucosa (Oriental Rat Snake)',
                            temperature: 27.1,
                            humidity: 65,
                            lightLevel: 380,
                            sensorCount: 4,
                            age: '1-2 years',
                            lastMeal: '4 days ago',
                            lastCleaning: '3 days ago',
                            nextCheckup: 'Next week',
                            story: 'Ravi serves as our primary education ambassador, visiting schools and community centers. His calm demeanor makes him perfect for public outreach and education programs.',
                            idealTemp: { min: 20, max: 40 },
                            idealHumidity: { min: 20, max: 60 },
                            idealLight: { min: 200, max: 700 },
                            media: {
                                videos: [],
                                images: ['images/DaRuKa01.jpg', 'images/DaRuKa02.jpg']
                            },
                            lightingCycle: {
                                active: false,
                                lights: [
                                    { id: 'heat3', name: 'Heat Pad', schedule: 'Manual', intensity: 0, active: false, icon: 'fas fa-square' },
                                    { id: 'room3', name: 'Room Light', schedule: 'Manual', intensity: 100, active: true, icon: 'fas fa-lightbulb' }
                                ]
                            },
                            sensors: [
                                { id: 'T006', type: 'temperature', value: 27.8, unit: 'Â°C', location: 'Center' },
                                { id: 'H006', type: 'humidity', value: 68, unit: '%', location: 'Center' },
                                { id: 'L006', type: 'light', value: 420, unit: 'lux', location: 'Ambient' },
                                { id: 'M002', type: 'motion', value: 'Moderate', unit: '', location: 'General' }
                            ]
                        },
                        {
                            id: 'kala',
                            name: 'Kala',
                            nickname: 'The Mysterious',
                            species: 'Bungarus caeruleus (Common Krait)',
                            temperature: 22.8,
                            humidity: 45,
                            lightLevel: 80,
                            sensorCount: 8,
                            age: 'Unknown',
                            lastMeal: '7 days ago',
                            lastCleaning: 'Yesterday',
                            nextCheckup: 'Tomorrow',
                            story: 'Kala is our newest resident, still adjusting to her environment. As a nocturnal species, she requires specialized monitoring to ensure proper adaptation.',
                            idealTemp: { min: 15, max: 35 },
                            idealHumidity: { min: 30, max: 80 },
                            idealLight: { min: 10, max: 200 },
                            media: {
                                videos: ['videos/CrMlKa.mp4'],
                                images: ['images/CrMlKa01.jpg', 'images/CrMlKa02.jpg', 'images/CrMlKa03.jpg']
                            },
                            lightingCycle: {
                                active: true,
                                lights: [
                                    { id: 'heat4', name: 'Under Tank Heater', schedule: '24/7', intensity: 30, active: true, icon: 'fas fa-fire' },
                                    { id: 'dim4', name: 'Dim Red Light', schedule: '24/7', intensity: 5, active: true, icon: 'fas fa-circle' },
                                    { id: 'night4', name: 'Night Vision IR', schedule: '6:00 PM - 6:00 AM', intensity: 20, active: true, icon: 'fas fa-eye' }
                                ]
                            },
                            sensors: [
                                { id: 'T007', type: 'temperature', value: 24.1, unit: 'Â°C', location: 'Warm Side' },
                                { id: 'T008', type: 'temperature', value: 21.2, unit: 'Â°C', location: 'Cool Side' },
                                { id: 'T009', type: 'temperature', value: 19.8, unit: 'Â°C', location: 'Hide Box' },
                                { id: 'H007', type: 'humidity', value: 48, unit: '%', location: 'Warm Side' },
                                { id: 'H008', type: 'humidity', value: 52, unit: '%', location: 'Cool Side' },
                                { id: 'L007', type: 'light', value: 85, unit: 'lux', location: 'Basking' },
                                { id: 'L008', type: 'light', value: 25, unit: 'lux', location: 'Hide' },
                                { id: 'M003', type: 'motion', value: 'Low', unit: '', location: 'General' }
                            ]
                        },
                        {
                            id: 'lila-maya',
                            name: 'Lila & Maya',
                            nickname: 'The Duo',
                            species: 'Boiga forsteni (Forsten\'s Cat Snake)',
                            temperature: 26.3,
                            humidity: 78,
                            lightLevel: 220,
                            sensorCount: 6,
                            age: '2-3 years',
                            lastMeal: '2 days ago',
                            lastCleaning: 'Yesterday',
                            nextCheckup: 'This week',
                            story: 'This bonded pair is part of our conservation breeding program. Their arboreal habitat setup serves as a model for other institutions working with similar species.',
                            idealTemp: { min: 20, max: 30 },
                            idealHumidity: { min: 30, max: 100 },
                            idealLight: { min: 100, max: 500 },
                            media: {
                                videos: ['videos/HyHyKa.mp4'],
                                images: ['images/HyHyKa01.jpg', 'images/HyHyKa02.jpg', 'images/HyHyKa03.jpg']
                            },
                            lightingCycle: {
                                active: true,
                                lights: [
                                    { id: 'heat5', name: 'Canopy Heater', schedule: '6:00 AM - 8:00 PM', intensity: 55, active: true, icon: 'fas fa-sun' },
                                    { id: 'uv5', name: 'UV-A/B Combo', schedule: '8:00 AM - 6:00 PM', intensity: 70, active: true, icon: 'fas fa-radiation' },
                                    { id: 'mist5', name: 'Misting Light', schedule: 'Auto with humidity', intensity: 25, active: false, icon: 'fas fa-tint' }
                                ]
                            },
                            sensors: [
                                { id: 'T010', type: 'temperature', value: 27.5, unit: 'Â°C', location: 'Canopy' },
                                { id: 'T011', type: 'temperature', value: 24.8, unit: 'Â°C', location: 'Mid Level' },
                                { id: 'H009', type: 'humidity', value: 80, unit: '%', location: 'Substrate' },
                                { id: 'H010', type: 'humidity', value: 75, unit: '%', location: 'Canopy' },
                                { id: 'L009', type: 'light', value: 240, unit: 'lux', location: 'Branch Level' },
                                { id: 'L010', type: 'light', value: 150, unit: 'lux', location: 'Ground' }
                            ]
                        },
                        {
                            id: 'vikram',
                            name: 'Vikram',
                            nickname: 'The Veteran',
                            species: 'Daboia russelii (Russell\'s Viper)',
                            temperature: 29.1,
                            humidity: 55,
                            lightLevel: 580,
                            sensorCount: 8,
                            age: '4-5 years',
                            lastMeal: '6 days ago',
                            lastCleaning: '2 days ago',
                            nextCheckup: 'This week',
                            story: 'Vikram is one of our senior residents contributing to anti-venom research. His extensive participation in research programs has contributed significantly to medical advances.',
                            idealTemp: { min: 20, max: 40 },
                            idealHumidity: { min: 20, max: 80 },
                            idealLight: { min: 300, max: 900 },
                            media: {
                                videos: ['videos/DaRuKa.mp4'],
                                images: ['images/DaRuKa01.jpg', 'images/DaRuKa02.jpg', 'images/DaRuKa03.jpg', 'images/DaRuKa04.jpg', 'images/DaRuKa05.jpg', 'images/DaRuKa06.jpg']
                            },
                            lightingCycle: {
                                active: true,
                                lights: [
                                    { id: 'heat6', name: 'Primary Heat Lamp', schedule: '7:00 AM - 7:00 PM', intensity: 80, active: true, icon: 'fas fa-sun' },
                                    { id: 'heat7', name: 'Secondary Heat', schedule: '24/7', intensity: 35, active: true, icon: 'fas fa-fire' },
                                    { id: 'day6', name: 'Full Spectrum LED', schedule: '6:00 AM - 6:00 PM', intensity: 65, active: true, icon: 'fas fa-lightbulb' },
                                    { id: 'night6', name: 'Infrared Camera Light', schedule: '6:00 PM - 6:00 AM', intensity: 20, active: false, icon: 'fas fa-video' }
                                ]
                            },
                            sensors: [
                                { id: 'T012', type: 'temperature', value: 31.2, unit: 'Â°C', location: 'Primary Basking' },
                                { id: 'T013', type: 'temperature', value: 28.5, unit: 'Â°C', location: 'Secondary Basking' },
                                { id: 'T014', type: 'temperature', value: 25.8, unit: 'Â°C', location: 'Cool Retreat' },
                                { id: 'H011', type: 'humidity', value: 58, unit: '%', location: 'Warm Side' },
                                { id: 'H012', type: 'humidity', value: 52, unit: '%', location: 'Cool Side' },
                                { id: 'L011', type: 'light', value: 620, unit: 'lux', location: 'Primary Basking' },
                                { id: 'L012', type: 'light', value: 380, unit: 'lux', location: 'Secondary' },
                                { id: 'L013', type: 'light', value: 180, unit: 'lux', location: 'Shade' }
                            ]
                        }
                    ]
                }
            },
            computed: {
                totalSnakes() {
                    return this.snakes.length;
                },
                activeFeeds() {
                    return this.snakes.filter(s => s.media.videos.length > 0).length;
                },
                averageTemp() {
                    const total = this.snakes.reduce((sum, s) => sum + s.temperature, 0);
                    return Math.round(total / this.snakes.length * 10) / 10;
                },
                averageHumidity() {
                    const total = this.snakes.reduce((sum, s) => sum + s.humidity, 0);
                    return Math.round(total / this.snakes.length);
                },
                currentMediaArray() {
                    if (!this.selectedSnake) return [];
                    return this.currentMediaType === 'video' ? 
                           this.selectedSnake.media.videos : 
                           this.selectedSnake.media.images;
                }
            },
            methods: {
                updateTime() {
                    const now = new Date();
                    this.currentTime = now.toLocaleTimeString('en-IN', { 
                        timeZone: 'Asia/Kolkata',
                        hour12: false,
                        hour: 'numeric',
                        minute: '2-digit'
                    });
                },
                toggleAdminDropdown() {
                    this.adminDropdownOpen = !this.adminDropdownOpen;
                },
                toggleAdminMode() {
                    this.adminMode = !this.adminMode;
                    this.adminDropdownOpen = false;
                },
                startEdit(field) {
                    if (!this.adminMode) return;
                    // Focus and select text for immediate editing
                    setTimeout(() => document.getSelection().selectAllChildren(event.target), 10);
                },
                saveField(field, event) {
                    if (!this.adminMode || !this.selectedSnake) return;
                    const newValue = event.target.textContent.trim();
                    if (this.selectedSnake[field] !== newValue) {
                        this.selectedSnake[field] = newValue;
                        this.saveToStorage();
                    }
                },
                saveToStorage() {
                    localStorage.setItem('sanctuaryOS_data', JSON.stringify(this.snakes));
                    // Optional: sync to backend
                    // fetch('/api/save', {method:'POST', body:JSON.stringify(this.snakes)})
                },
                loadFromStorage() {
                    const saved = localStorage.getItem('sanctuaryOS_data');
                    if (saved) this.snakes = JSON.parse(saved);
                },
                addNewSnake() {
                    const newSnake = {
                        id: 'new_' + Date.now(),
                        name: 'New Resident',
                        nickname: 'The Newcomer',
                        species: 'Species (Scientific name)',
                        temperature: 25.0,
                        humidity: 60,
                        lightLevel: 300,
                        sensorCount: 2,
                        age: 'Unknown',
                        lastMeal: 'Not recorded',
                        lastCleaning: 'Today',
                        nextCheckup: 'TBD',
                        story: 'Add research notes and observations here...',
                        idealTemp: { min: 20, max: 35 },
                        idealHumidity: { min: 30, max: 70 },
                        idealLight: { min: 200, max: 600 },
                        media: { videos: [], images: [] },
                        lightingCycle: {
                            active: false,
                            lights: [
                                { id: 'heat_new', name: 'Heat Source', schedule: 'Manual', intensity: 0, active: false, icon: 'fas fa-fire' }
                            ]
                        },
                        sensors: [
                            { id: 'T_new1', type: 'temperature', value: 25, unit: 'Â°C', location: 'Point 1' },
                            { id: 'H_new1', type: 'humidity', value: 60, unit: '%', location: 'Point 1' }
                        ]
                    };
                    this.snakes.push(newSnake);
                    this.adminDropdownOpen = false;
                },
                openSnakeProfile(snake) {
                    this.selectedSnake = snake;
                    this.currentMediaType = snake.media.videos.length > 0 ? 'video' : 'image';
                    this.currentMediaIndex = 0;
                    document.body.style.overflow = 'hidden';
                },
                closeSnakeProfile() {
                    this.selectedSnake = null;
                    document.body.style.overflow = 'auto';
                },
                switchMediaType(type) {
                    this.currentMediaType = type;
                    this.currentMediaIndex = 0;
                },
                nextMedia() {
                    if (this.currentMediaIndex < this.currentMediaArray.length - 1) {
                        this.currentMediaIndex++;
                    } else {
                        this.currentMediaIndex = 0;
                    }
                },
                previousMedia() {
                    if (this.currentMediaIndex > 0) {
                        this.currentMediaIndex--;
                    } else {
                        this.currentMediaIndex = this.currentMediaArray.length - 1;
                    }
                },
                getSensorColor(type) {
                    switch(type) {
                        case 'temperature': return 'bg-radium';
                        case 'humidity': return 'bg-uranium';
                        case 'light': return 'bg-yellow-500';
                        case 'motion': return 'bg-laboratory';
                        default: return 'bg-text-light';
                    }
                },
                getSensorPosition(index, total) {
                    const angle = (index / total) * 2 * Math.PI;
                    const radius = 40; // percentage from center
                    const centerX = 50;
                    const centerY = 50;
                    
                    const x = centerX + radius * Math.cos(angle);
                    const y = centerY + radius * Math.sin(angle);
                    
                    return {
                        left: `${x}%`,
                        top: `${y}%`,
                        transform: 'translate(-50%, -50%)'
                    };
                }
            },
            mounted() {
                this.loadFromStorage();
                this.updateTime();
                setInterval(this.updateTime, 1000);
                
                // Real-time environmental simulation
                setInterval(() => {
                    this.snakes.forEach(snake => {
                        const tempVariation = (Math.random() - 0.5) * 0.3;
                        const humidVariation = (Math.random() - 0.5) * 2;
                        const lightVariation = (Math.random() - 0.5) * 10;
                        
                        snake.temperature = Math.round((snake.temperature + tempVariation) * 10) / 10;
                        snake.humidity = Math.round((snake.humidity + humidVariation));
                        snake.lightLevel = Math.round(snake.lightLevel + lightVariation);
                        
                        // Keep within realistic bounds
                        snake.temperature = Math.max(10, Math.min(45, snake.temperature));
                        snake.humidity = Math.max(10, Math.min(100, snake.humidity));
                        snake.lightLevel = Math.max(0, Math.min(1000, snake.lightLevel));
                        
                        // Update sensor values too
                        snake.sensors.forEach(sensor => {
                            if (sensor.type === 'temperature') {
                                sensor.value = Math.round((sensor.value + (Math.random() - 0.5) * 0.2) * 10) / 10;
                                sensor.value = Math.max(10, Math.min(45, sensor.value));
                            } else if (sensor.type === 'humidity') {
                                sensor.value = Math.round(sensor.value + (Math.random() - 0.5) * 1);
                                sensor.value = Math.max(10, Math.min(100, sensor.value));
                            } else if (sensor.type === 'light') {
                                sensor.value = Math.round(sensor.value + (Math.random() - 0.5) * 5);
                                sensor.value = Math.max(0, Math.min(1000, sensor.value));
                            }
                        });
                    });
                }, 8000);
                
                // Close dropdowns when clicking outside
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.relative')) {
                        this.adminDropdownOpen = false;
                    }
                });
            }
        }).mount('#app');
    </script>
</body>
</html>